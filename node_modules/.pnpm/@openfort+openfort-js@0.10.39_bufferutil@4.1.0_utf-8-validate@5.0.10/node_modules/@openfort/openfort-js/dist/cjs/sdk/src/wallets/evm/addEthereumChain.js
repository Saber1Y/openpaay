"use strict";var r=require("./JsonRpcError.js");const e=["chainId","chainName","nativeCurrency"],n=n=>{if(!n||"object"!=typeof n)throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(r=>e.every(e=>e in r))(n))throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${e.join(", ")}`);if(!n.chainName||""===n.chainName.trim())throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"chainName cannot be empty");if(!((o=n.nativeCurrency)&&"object"==typeof o&&"name"in o&&"symbol"in o&&"decimals"in o&&"string"==typeof o.name&&"string"==typeof o.symbol&&"number"==typeof o.decimals&&Number.isInteger(o.decimals)))throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"Invalid nativeCurrency object");var o;if(0===n.rpcUrls?.length)throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(n.chainId))throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:n.chainId,blockExplorerUrls:n.blockExplorerUrls||[],chainName:n.chainName,iconUrls:n.iconUrls||[],rpcUrls:n.rpcUrls||[],nativeCurrency:n.nativeCurrency}};exports.addEthereumChain=async({params:e,rpcProvider:o,storage:a})=>{if(!e||!Array.isArray(e)||0===e.length)throw new r.JsonRpcError(r.RpcErrorCode.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const i=n(e[0]),c=parseInt(i.chainId,16),{chainId:t}=await o.detectNetwork();return c!==t&&null};
