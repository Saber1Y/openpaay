"use strict";var e=require("../core/errors/openfortError.js"),r=require("./scopedStorage.js"),t=require("./storage.js");exports.LazyStorage=class{realStorage=null;customStorage;publishableKey;constructor(e,r){this.publishableKey=e,this.customStorage=r}getRealStorage(){if(!this.realStorage){let o;if(this.customStorage)o=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new e.OpenfortError("Storage not available. Please provide custom storage or use in browser environment.",e.OpenfortErrorType.INVALID_CONFIGURATION);o=new t.StorageImplementation(localStorage)}this.realStorage=new r.ScopedStorage(o,this.publishableKey)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,r){this.getRealStorage().save(e,r)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}};
