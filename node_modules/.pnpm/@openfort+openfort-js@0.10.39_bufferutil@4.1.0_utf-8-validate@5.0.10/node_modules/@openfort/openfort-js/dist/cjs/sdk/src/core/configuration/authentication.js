"use strict";var t=require("../../storage/istorage.js");class r{type;token;player;refreshToken;thirdPartyProvider;thirdPartyTokenType;constructor(t,r,e,i,o,h){this.type=t,this.token=r,this.player=e,this.refreshToken=i,this.thirdPartyProvider=o,this.thirdPartyTokenType=h}static thirdPartyAuthToken;get provider(){return this.thirdPartyProvider}get tokenType(){return this.thirdPartyTokenType}save(e){const i="third_party"===this.type;i&&(r.thirdPartyAuthToken=this.token),e.save(t.StorageKeys.AUTHENTICATION,JSON.stringify({type:this.type,token:i?void 0:this.token,player:this.player,refreshToken:this.refreshToken,thirdPartyProvider:this.thirdPartyProvider,thirdPartyTokenType:this.thirdPartyTokenType}))}static clear(e){r.thirdPartyAuthToken="",e.remove(t.StorageKeys.AUTHENTICATION)}static async fromStorage(e){const i=await e.get(t.StorageKeys.AUTHENTICATION);if(!i)return null;try{const t=JSON.parse(i);return"third_party"===t.type&&(t.token=r.thirdPartyAuthToken),new r(t.type,t.token,t.player,t.refreshToken,t.thirdPartyProvider,t.thirdPartyTokenType)}catch{return null}}}exports.Authentication=r;
