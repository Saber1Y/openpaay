"use strict";var r=require("../../core/errors/openfortError.js"),t=require("./JsonRpcError.js");exports.estimateGas=async({params:e,account:a,authentication:o,backendClient:n,policyId:i})=>{const s=await(async(e,a,o,n,i)=>{const s=e.map(r=>{if(!r.to)throw new t.JsonRpcError(t.RpcErrorCode.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(r.to),data:r.data?String(r.data):void 0,value:r.value?String(r.value):void 0}});return r.withOpenfortError(async()=>(await a.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:i,chainId:o.chainId,interactions:s}},{headers:{authorization:`Bearer ${a.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:r.OpenfortErrorType.AUTHENTICATION_ERROR})})(e,n,a,o,i).catch(r=>{throw new t.JsonRpcError(t.RpcErrorCode.TRANSACTION_REJECTED,r.message)});return s.estimatedTXGas};
