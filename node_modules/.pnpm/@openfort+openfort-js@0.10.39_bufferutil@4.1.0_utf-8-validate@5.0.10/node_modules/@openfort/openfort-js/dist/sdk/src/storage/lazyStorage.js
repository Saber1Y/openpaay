import{OpenfortError as e,OpenfortErrorType as t}from"../core/errors/openfortError.js";import{ScopedStorage as o}from"./scopedStorage.js";import{StorageImplementation as r}from"./storage.js";class a{realStorage=null;customStorage;publishableKey;constructor(e,t){this.publishableKey=e,this.customStorage=t}getRealStorage(){if(!this.realStorage){let a;if(this.customStorage)a=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new e("Storage not available. Please provide custom storage or use in browser environment.",t.INVALID_CONFIGURATION);a=new r(localStorage)}this.realStorage=new o(a,this.publishableKey)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,t){this.getRealStorage().save(e,t)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}}export{a as LazyStorage};
