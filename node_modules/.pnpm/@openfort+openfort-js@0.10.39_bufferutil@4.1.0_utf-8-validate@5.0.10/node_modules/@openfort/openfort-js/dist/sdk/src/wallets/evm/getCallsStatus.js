import{withOpenfortError as s,OpenfortErrorType as e}from"../../core/errors/openfortError.js";import{JsonRpcError as t,RpcErrorCode as a}from"./JsonRpcError.js";const r=async({params:r,authentication:o,backendClient:n})=>{const c=await(async(t,a,r)=>s(async()=>(await a.transactionIntentsApi.getTransactionIntent({id:t},{headers:{authorization:`Bearer ${a.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}})).data,{default:e.AUTHENTICATION_ERROR}))(r[0],n,o).catch(s=>{throw new t(a.TRANSACTION_REJECTED,s.message)});return{status:c.response?"CONFIRMED":"PENDING",receipts:c.response?[{status:0===c.response.status?"reverted":"success",logs:c.response.logs?.map(s=>({address:s.address,data:s.data,topics:s.topics}))||[],blockHash:c.response.transactionHash||"",blockNumber:BigInt(c.response.blockNumber||0),gasUsed:BigInt(c.response.gasUsed||0),transactionHash:c.response.transactionHash||""}]:void 0}};export{r as getCallStatus};
