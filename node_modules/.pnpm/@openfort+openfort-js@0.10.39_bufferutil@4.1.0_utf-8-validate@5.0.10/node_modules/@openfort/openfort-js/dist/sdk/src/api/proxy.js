import{SDKConfiguration as i}from"../core/config/config.js";import{OpenfortError as n,OpenfortErrorType as t,withOpenfortError as e}from"../core/errors/openfortError.js";class s{backendApiClients;validateAndRefreshToken;ensureInitialized;getSignerSignFunction;constructor(i,n,t,e,s){this.backendApiClients=n,this.validateAndRefreshToken=t,this.ensureInitialized=e,this.getSignerSignFunction=s}async sendSignatureTransactionIntentRequest(s,a=null,r=null,o=!1){await this.ensureInitialized();if(!i.getInstance())throw new n("Configuration not found",t.INVALID_CONFIGURATION);await this.validateAndRefreshToken();let u=r;if(!u){if(!a)throw new n("No signableHash or signature provided",t.OPERATION_NOT_SUPPORTED_ERROR);if(!this.getSignerSignFunction)throw new n("In order to sign a transaction intent, a signer must be configured",t.MISSING_SIGNER_ERROR);const i=await this.getSignerSignFunction();u=await i(a)}const c={id:s,signatureRequest:{signature:u,optimistic:o}};return e(async()=>(await this.backendApiClients.transactionIntentsApi.signature(c)).data,{default:t.INTERNAL_ERROR})}async sendSignatureSessionRequest(i,n,s){await this.ensureInitialized();const a={id:i,signatureRequest:{signature:n,optimistic:s}};return e(async()=>(await this.backendApiClients.sessionsApi.signatureSession(a)).data,{default:t.INTERNAL_ERROR})}}export{s as ProxyApi};
