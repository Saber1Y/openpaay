import{withOpenfortError as t,OpenfortErrorType as a}from"../../core/errors/openfortError.js";import{JsonRpcError as e,RpcErrorCode as r}from"./JsonRpcError.js";const n=async({params:n,account:o,authentication:i,backendClient:s,policyId:c})=>{const d=await(async(n,o,i,s,c)=>{const d=n.map(t=>{if(!t.to)throw new e(r.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(t.to),data:t.data?String(t.data):void 0,value:t.value?String(t.value):void 0}});return t(async()=>(await o.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:c,chainId:i.chainId,interactions:d}},{headers:{authorization:`Bearer ${o.config.backend.accessToken}`,"x-player-token":s.token,"x-auth-provider":s.thirdPartyProvider,"x-token-type":s.thirdPartyTokenType}})).data,{default:a.AUTHENTICATION_ERROR})})(n,s,o,i,c).catch(t=>{throw new e(r.TRANSACTION_REJECTED,t.message)});return d.estimatedTXGas};export{n as estimateGas};
