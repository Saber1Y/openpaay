import{JsonRpcError as e,RpcErrorCode as r}from"./JsonRpcError.js";const n=["chainId","chainName","nativeCurrency"],a=a=>{if(!a||"object"!=typeof a)throw new e(r.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(e=>n.every(r=>r in e))(a))throw new e(r.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${n.join(", ")}`);if(!a.chainName||""===a.chainName.trim())throw new e(r.INVALID_PARAMS,"chainName cannot be empty");if(!((i=a.nativeCurrency)&&"object"==typeof i&&"name"in i&&"symbol"in i&&"decimals"in i&&"string"==typeof i.name&&"string"==typeof i.symbol&&"number"==typeof i.decimals&&Number.isInteger(i.decimals)))throw new e(r.INVALID_PARAMS,"Invalid nativeCurrency object");var i;if(0===a.rpcUrls?.length)throw new e(r.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(a.chainId))throw new e(r.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:a.chainId,blockExplorerUrls:a.blockExplorerUrls||[],chainName:a.chainName,iconUrls:a.iconUrls||[],rpcUrls:a.rpcUrls||[],nativeCurrency:a.nativeCurrency}},i=async({params:n,rpcProvider:i,storage:t})=>{if(!n||!Array.isArray(n)||0===n.length)throw new e(r.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const c=a(n[0]),o=parseInt(c.chainId,16),{chainId:s}=await i.detectNetwork();return o!==s&&null};export{i as addEthereumChain};
