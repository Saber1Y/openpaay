import{ax as a,ay as N}from"./index-8_JFJoco.js";const C="strings/5.8.0",p=new a(C);var l;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(l||(l={}));var r;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(r||(r={}));function O(e,t,f,n,u){return p.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",f)}function g(e,t,f,n,u){if(e===r.BAD_PREFIX||e===r.UNEXPECTED_CONTINUE){let i=0;for(let x=t+1;x<f.length&&f[x]>>6===2;x++)i++;return i}return e===r.OVERRUN?f.length-t-1:0}function F(e,t,f,n,u){return e===r.OVERLONG?(n.push(u),0):(n.push(65533),g(e,t,f))}const E=Object.freeze({error:O,ignore:g,replace:F});function s(e,t){t==null&&(t=E.error),e=N(e);const f=[];let n=0;for(;n<e.length;){const u=e[n++];if(u>>7===0){f.push(u);continue}let i=null,x=null;if((u&224)===192)i=1,x=127;else if((u&240)===224)i=2,x=2047;else if((u&248)===240)i=3,x=65535;else{(u&192)===128?n+=t(r.UNEXPECTED_CONTINUE,n-1,e,f):n+=t(r.BAD_PREFIX,n-1,e,f);continue}if(n-1+i>=e.length){n+=t(r.OVERRUN,n-1,e,f);continue}let c=u&(1<<8-i-1)-1;for(let o=0;o<i;o++){let h=e[n];if((h&192)!=128){n+=t(r.MISSING_CONTINUE,n,e,f),c=null;break}c=c<<6|h&63,n++}if(c!==null){if(c>1114111){n+=t(r.OUT_OF_RANGE,n-1-i,e,f,c);continue}if(c>=55296&&c<=57343){n+=t(r.UTF16_SURROGATE,n-1-i,e,f,c);continue}if(c<=x){n+=t(r.OVERLONG,n-1-i,e,f,c);continue}f.push(c)}}return f}function U(e,t=l.current){t!=l.current&&(p.checkNormalize(),e=e.normalize(t));let f=[];for(let n=0;n<e.length;n++){const u=e.charCodeAt(n);if(u<128)f.push(u);else if(u<2048)f.push(u>>6|192),f.push(u&63|128);else if((u&64512)==55296){n++;const i=e.charCodeAt(n);if(n>=e.length||(i&64512)!==56320)throw new Error("invalid utf-8 string");const x=65536+((u&1023)<<10)+(i&1023);f.push(x>>18|240),f.push(x>>12&63|128),f.push(x>>6&63|128),f.push(x&63|128)}else f.push(u>>12|224),f.push(u>>6&63|128),f.push(u&63|128)}return N(f)}function d(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function _(e,t){return d(s(e,t))}function R(e,t=l.current){return s(U(e,t))}export{_ as a,R as b,U as t};
